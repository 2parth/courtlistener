{% extends "profile/nav.html" %}
{% load humanize %}
{% block title %}Visualizations - CourtListener.com{% endblock %}

{% block search-form %}{% endblock %}

{% block nav-visualizations %}active{% endblock %}

{% block content %}
    <div class="col-xs-12">
        {% if user.scotus_maps.all %}
            <div class="table-responsive">
                <table class="table settings-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Title</th>
                            <th>From</th>
                            <th>To</th>
                            <th>Created</th>
                            <th>Modified</th>
                            <th>View&nbsp;Count</th>
                            <th>Published</th>
                            <th>Deleted</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for viz in user.scotus_maps.all %}
                        <tr>
                            <td>{{ viz.pk }}</td>
                            <td>
                                <a href="{{ viz.get_absolute_url }}">{{ viz.title }}</a>
                            </td>
                            <td>
                                {% if viz.cluster_start.case_name_short %}
                                    {{ viz.cluster_start.case_name_short }}
                                {% elif vis.cluster_start.case_name %}
                                    {{ viz.cluster_start.case_name }}
                                {% else %}
                                    {{ viz.cluster_start.case_name_full }}
                                {% endif %}
                            </td>
                            <td>
                                {% if viz.cluster_end.case_name_short %}
                                    {{ viz.cluster_end.case_name_short }}
                                {% elif vis.cluster_end.case_name %}
                                    {{ viz.cluster_end.case_name }}
                                {% else %}
                                    {{ viz.cluster_end.case_name_full|truncatewords:"20" }}
                                {% endif %}
                            </td>
                            <td>{{ viz.date_created }}</td>
                            <td>{{ viz.date_modified }}</td>
                            <td>{{ viz.view_count|intcomma }}</td>
                            <td>{{ viz.published|yesno|capfirst }}</td>
                            <td>{{ viz.deleted|yesno|capfirst }}</td>
                            <td class="right">
                                <a href="{% url "edit_visualization" pk=viz.pk %}"
                                   class="btn btn-primary btn-xs">
                                    <i class="fa fa-pencil"></i>&nbsp;Edit</a>
                                <a href="{% url "delete_visualization" pk=viz.pk %}"
                                   class="btn btn-danger btn-xs">
                                    <i class="fa fa-trash-o"></i>&nbsp;Delete</a>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="row">
                <div class="col-sm-3"></div>
                <div class="col-sm-6">
                    <h3>You Don't Have Any Visualizations</h3>

                    <p>Visualizations are a way to plot the citations between Supreme Court cases. With visualizations, you can make lots of inferences about cases, like how precedent evolved from one case to another or how a topic may have become more liberal or conservative over time.
                    </p>
                    <p><a href="{% url "new_visualization" %}" class="btn btn-primary btn-lg">Make a Visualization</a>
                    </p>
                </div>
                <div class="col-sm-3"></div>
            </div>
        {% endif %}
    </div>
{% endblock %}
